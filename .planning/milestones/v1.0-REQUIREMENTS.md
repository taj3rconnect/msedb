# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-18
**Original defined:** 2026-02-16
**Core Value:** Users never lose control of their email. The system observes, learns, suggests, and only acts with explicit approval -- and every action can be undone.

## v1 Requirements — All Complete

### Authentication

- [x] **AUTH-01**: User authenticates via Azure AD OAuth 2.0 SSO (MSAL) — Phase 2
- [x] **AUTH-02**: JWT session management with httpOnly cookies — Phase 2
- [x] **AUTH-03**: Admin can invite users by email; role-based access control — Phase 2
- [x] **AUTH-04**: Encrypted token storage (AES-256-GCM) with proactive refresh — Phase 2
- [x] **AUTH-05**: Token lifecycle management with background monitoring — Phase 2
- [x] **AUTH-06**: Multi-mailbox per user with independent tokens/webhooks/rules — Phase 2

### Observation

- [x] **OBSV-01**: Real-time email event observation via Graph API webhooks — Phase 3
- [x] **OBSV-02**: Delta query fallback every 15 min per mailbox per folder — Phase 3
- [x] **OBSV-03**: Email metadata extraction and storage (never body content) — Phase 3
- [x] **OBSV-04**: Event deduplication via compound index, 202 immediate response — Phase 3

### Patterns

- [x] **PATN-01**: Sender-level pattern detection — Phase 5
- [x] **PATN-02**: Folder routing pattern detection — Phase 5
- [x] **PATN-03**: Confidence scoring with asymmetric thresholds (98% delete, 85% move) — Phase 5
- [x] **PATN-04**: Pattern suggestion UI with approve/reject/customize workflow — Phase 5

### Automation

- [x] **AUTO-01**: Multi-action automation rules (move + mark read + categorize) — Phase 6
- [x] **AUTO-02**: Rule management with priority ordering, enable/disable, per-rule stats — Phase 6
- [x] **AUTO-03**: Rule engine evaluation order: kill switch → whitelist → priority rules — Phase 6
- [x] **AUTO-04**: Pattern-to-rule conversion with auto-approval on customize — Phase 6

### Safety

- [x] **SAFE-01**: Staging folder with 24-hour grace period for destructive actions — Phase 6
- [x] **SAFE-02**: Kill switch to pause all automation, visible in top navigation — Phase 6
- [x] **SAFE-03**: Undo any automated action within 48 hours (soft-delete only) — Phase 6
- [x] **SAFE-04**: Sender/domain whitelist per-mailbox and org-wide by admin — Phase 6
- [x] **SAFE-05**: Audit log of all automated actions with undo capability — Phase 6

### Dashboard

- [x] **DASH-01**: Dashboard with stats cards, activity feed, pending suggestions — Phase 4
- [x] **DASH-02**: Real-time updates via Socket.IO — Phase 4
- [x] **DASH-03**: In-app notification system (bell icon) with read/unread state — Phase 7

### Pages

- [x] **PAGE-01**: Email activity page with filters, timeline, sender breakdown — Phase 4
- [x] **PAGE-02**: Patterns page with cards, confidence visualization, approve/reject — Phase 5
- [x] **PAGE-03**: Rules page with drag-and-drop priority ordering — Phase 6
- [x] **PAGE-04**: Staging page with countdown timers and rescue/execute actions — Phase 6
- [x] **PAGE-05**: Audit log page with filterable history and undo buttons — Phase 6
- [x] **PAGE-06**: Settings page with preferences, mailboxes, whitelists, data export — Phase 7
- [x] **PAGE-07**: Admin panel with user management, org rules, analytics, health — Phase 7

### Infrastructure

- [x] **INFR-01**: Docker Compose stack (React 19, Express 5, MongoDB 7, Redis 7) — Phase 1
- [x] **INFR-02**: Cloudflare Tunnel for webhook endpoint — Phase 1 (code ready, tunnel config deferred)
- [x] **INFR-03**: BullMQ background jobs with Redis noeviction policy — Phase 1
- [x] **INFR-04**: Security hardening (AES-256-GCM, rate limiting, $select on Graph) — Phase 1
- [x] **INFR-05**: Health endpoints with service status reporting — Phase 1

### Outlook Add-in

- [x] **PLUG-01**: Outlook Add-in with taskpane and ribbon commands — Phase 8
- [x] **PLUG-02**: Sender whitelist/blacklist from Outlook syncing to backend — Phase 8
- [x] **PLUG-03**: Domain whitelist/blacklist from Outlook at domain level — Phase 8
- [x] **PLUG-04**: Azure AD SSO via NAA with backend JWKS token validation — Phase 8

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| AUTH-01 | Phase 2 | Complete |
| AUTH-02 | Phase 2 | Complete |
| AUTH-03 | Phase 2 | Complete |
| AUTH-04 | Phase 2 | Complete |
| AUTH-05 | Phase 2 | Complete |
| AUTH-06 | Phase 2 | Complete |
| OBSV-01 | Phase 3 | Complete |
| OBSV-02 | Phase 3 | Complete |
| OBSV-03 | Phase 3 | Complete |
| OBSV-04 | Phase 3 | Complete |
| PATN-01 | Phase 5 | Complete |
| PATN-02 | Phase 5 | Complete |
| PATN-03 | Phase 5 | Complete |
| PATN-04 | Phase 5 | Complete |
| AUTO-01 | Phase 6 | Complete |
| AUTO-02 | Phase 6 | Complete |
| AUTO-03 | Phase 6 | Complete |
| AUTO-04 | Phase 6 | Complete |
| SAFE-01 | Phase 6 | Complete |
| SAFE-02 | Phase 6 | Complete |
| SAFE-03 | Phase 6 | Complete |
| SAFE-04 | Phase 6 | Complete |
| SAFE-05 | Phase 6 | Complete |
| DASH-01 | Phase 4 | Complete |
| DASH-02 | Phase 4 | Complete |
| DASH-03 | Phase 7 | Complete |
| PAGE-01 | Phase 4 | Complete |
| PAGE-02 | Phase 5 | Complete |
| PAGE-03 | Phase 6 | Complete |
| PAGE-04 | Phase 6 | Complete |
| PAGE-05 | Phase 6 | Complete |
| PAGE-06 | Phase 7 | Complete |
| PAGE-07 | Phase 7 | Complete |
| INFR-01 | Phase 1 | Complete |
| INFR-02 | Phase 1 | Complete (code ready) |
| INFR-03 | Phase 1 | Complete |
| INFR-04 | Phase 1 | Complete |
| INFR-05 | Phase 1 | Complete |
| PLUG-01 | Phase 8 | Complete |
| PLUG-02 | Phase 8 | Complete |
| PLUG-03 | Phase 8 | Complete |
| PLUG-04 | Phase 8 | Complete |

**Coverage:**
- v1 requirements: 42 total
- Complete: 42/42
- Incomplete: 0

### Notes on Changed Requirements

- INFR-02 (Cloudflare Tunnel): Code implemented but tunnel not configured by user decision. Webhook subscriptions will fail until tunnel is operational.
- PLUG-01: Originally specified "context menu commands" but Outlook doesn't support ContextMenu extension point for MailApps. Changed to ribbon buttons + taskpane (MessageReadCommandSurface).

---
*Archived: 2026-02-18 after v1.0 milestone completion*
